

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modules &mdash; cpymad-lhc 0.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=988d0652" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=938c9ccc"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Welcome to the documentation of cpymad LHC!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.add_expression"><code class="docutils literal notranslate"><span class="pre">add_expression()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.amplitude_detuning_ptc"><code class="docutils literal notranslate"><span class="pre">amplitude_detuning_ptc()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.auto_dtype"><code class="docutils literal notranslate"><span class="pre">auto_dtype()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.closest_tune_approach"><code class="docutils literal notranslate"><span class="pre">closest_tune_approach()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.deactivate_arc_sextupoles"><code class="docutils literal notranslate"><span class="pre">deactivate_arc_sextupoles()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.dynamic_aperture_tracking"><code class="docutils literal notranslate"><span class="pre">dynamic_aperture_tracking()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.fractional_tune"><code class="docutils literal notranslate"><span class="pre">fractional_tune()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.get_coupling_knobs"><code class="docutils literal notranslate"><span class="pre">get_coupling_knobs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.get_k_strings"><code class="docutils literal notranslate"><span class="pre">get_k_strings()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.get_kqs_for_coupling_correction"><code class="docutils literal notranslate"><span class="pre">get_kqs_for_coupling_correction()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.get_lhc_sequence_filename_and_bv"><code class="docutils literal notranslate"><span class="pre">get_lhc_sequence_filename_and_bv()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.get_tfs"><code class="docutils literal notranslate"><span class="pre">get_tfs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.get_tune_and_chroma_knob_values"><code class="docutils literal notranslate"><span class="pre">get_tune_and_chroma_knob_values()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.get_tune_and_chroma_knobs"><code class="docutils literal notranslate"><span class="pre">get_tune_and_chroma_knobs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.lhc_arc_names"><code class="docutils literal notranslate"><span class="pre">lhc_arc_names()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.lhc_arcs"><code class="docutils literal notranslate"><span class="pre">lhc_arcs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.match_tune"><code class="docutils literal notranslate"><span class="pre">match_tune()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.power_landau_octupoles"><code class="docutils literal notranslate"><span class="pre">power_landau_octupoles()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.rdts_ptc"><code class="docutils literal notranslate"><span class="pre">rdts_ptc()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.sixtrack_output"><code class="docutils literal notranslate"><span class="pre">sixtrack_output()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.switch_magnetic_errors"><code class="docutils literal notranslate"><span class="pre">switch_magnetic_errors()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.general.temp_disable_errors"><code class="docutils literal notranslate"><span class="pre">temp_disable_errors()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-output-tools">Input/Output Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.io.PathContainer"><code class="docutils literal notranslate"><span class="pre">PathContainer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#corrector-limits">Corrector Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.corrector_limits.check_corrector_limits"><code class="docutils literal notranslate"><span class="pre">check_corrector_limits()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#coupling-correction">Coupling Correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.coupling_correction.correct_coupling"><code class="docutils literal notranslate"><span class="pre">correct_coupling()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.coupling_correction.correct_coupling_with_knobs"><code class="docutils literal notranslate"><span class="pre">correct_coupling_with_knobs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.coupling_correction.match"><code class="docutils literal notranslate"><span class="pre">match()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#coupling-knob">Coupling Knob</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.coupling_knob.calculate_coupling_coefficients_per_sector"><code class="docutils literal notranslate"><span class="pre">calculate_coupling_coefficients_per_sector()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.coupling_knob.create_coupling_knobs"><code class="docutils literal notranslate"><span class="pre">create_coupling_knobs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.coupling_knob.get_attribute_response"><code class="docutils literal notranslate"><span class="pre">get_attribute_response()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#ir-orbit">IR Orbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.ir_orbit.check_crabbing"><code class="docutils literal notranslate"><span class="pre">check_crabbing()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.ir_orbit.get_current_orbit_scheme"><code class="docutils literal notranslate"><span class="pre">get_current_orbit_scheme()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.ir_orbit.get_orbit_variables"><code class="docutils literal notranslate"><span class="pre">get_orbit_variables()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.ir_orbit.log_orbit"><code class="docutils literal notranslate"><span class="pre">log_orbit()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.ir_orbit.log_orbit_from_madx"><code class="docutils literal notranslate"><span class="pre">log_orbit_from_madx()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.ir_orbit.log_orbit_from_twiss"><code class="docutils literal notranslate"><span class="pre">log_orbit_from_twiss()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.ir_orbit.orbit_setup"><code class="docutils literal notranslate"><span class="pre">orbit_setup()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.logging.MaxFilter"><code class="docutils literal notranslate"><span class="pre">MaxFilter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.logging.StreamToLogger"><code class="docutils literal notranslate"><span class="pre">StreamToLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpymad_lhc.logging.cpymad_logging_setup"><code class="docutils literal notranslate"><span class="pre">cpymad_logging_setup()</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">cpymad-lhc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Modules</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/JoschD/cpymad_lhc" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-cpymad_lhc.general">
<span id="modules"></span><h1>Modules<a class="headerlink" href="#module-cpymad_lhc.general" title="Link to this heading"></a></h1>
<section id="general">
<h2>General<a class="headerlink" href="#general" title="Link to this heading"></a></h2>
<p>Some helper functions for cpymad, that would be complicated macros in MAD-X.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.add_expression">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">add_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#add_expression"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.add_expression" title="Link to this definition"></a></dt>
<dd><p>Add an expression to a variable that might already
be a deferred expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<em>Madx</em>) -- Madx instance to incorporate the variable in</p></li>
<li><p><strong>name</strong> (<em>str</em>) -- Name of the variable</p></li>
<li><p><strong>expression</strong> (<em>str</em>) -- Expression to assign</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.amplitude_detuning_ptc">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">amplitude_detuning_ptc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ampdet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chroma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TfsDataFrame</span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#amplitude_detuning_ptc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.amplitude_detuning_ptc" title="Link to this definition"></a></dt>
<dd><p>Calculate amplitude detuning via PTC_NORMAL</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>ampdet</strong> -- Maximum derivative order for amplitude detuning (only 0, 1 or 2 implemented). Default <cite>2</cite></p></li>
<li><p><strong>chroma</strong> -- Maximum derivative order for chromaticity. Default <cite>2</cite></p></li>
<li><p><strong>file</strong> -- Path to output file. Default <cite>None</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>TfsDataframe with results</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.auto_dtype">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">auto_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#auto_dtype"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.auto_dtype" title="Link to this definition"></a></dt>
<dd><p>Set DataFrame dtypes automatically.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.closest_tune_approach">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">closest_tune_approach</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dqx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dqy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-21</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knobs_suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#closest_tune_approach"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.closest_tune_approach" title="Link to this definition"></a></dt>
<dd><p>Tries to match the tunes to their mid-fractional tunes.
The difference between this mid-tune and the actual matched tune is the
closest tune approach.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.deactivate_arc_sextupoles">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">deactivate_arc_sextupoles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#deactivate_arc_sextupoles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.deactivate_arc_sextupoles" title="Link to this definition"></a></dt>
<dd><p>Deactivates all arc sextupoles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>beam</strong> -- beam to use</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.dynamic_aperture_tracking">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">dynamic_aperture_tracking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigmas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_angles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#dynamic_aperture_tracking"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.dynamic_aperture_tracking" title="Link to this definition"></a></dt>
<dd><p>Perform MAD-X tracking via the DYNAP module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>n_sigma</strong> (<em>int</em>) -- Number of sigmas in amplitude for particle distribution</p></li>
<li><p><strong>n_angles</strong> (<em>int</em>) -- number of angles for particle distribution</p></li>
<li><p><strong>turns</strong> (<em>int</em>) -- number of turns to track. Default 1024</p></li>
<li><p><strong>min_delta</strong> (<em>float</em>) -- minimum amplitude/angle to use,
avoids using 0 and 1 values. Default 0.05</p></li>
<li><p><strong>outputdir</strong> (<em>Path</em>) -- Path to write the output files. Default <cite>None</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.fractional_tune">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">fractional_tune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tune</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#fractional_tune"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.fractional_tune" title="Link to this definition"></a></dt>
<dd><p>Returns the fractional tune.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.get_coupling_knobs">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">get_coupling_knobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#get_coupling_knobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.get_coupling_knobs" title="Link to this definition"></a></dt>
<dd><p>Get names of knobs to change coupling as tuple of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>accel</strong> -- Accelerator either ‘LHC’  or ‘HLLHC’</p></li>
<li><p><strong>beam</strong> -- Beam to use, for the (LHC) knob names</p></li>
<li><p><strong>suffix</strong> (<em>str</em>) -- suffix to add to the knobs, e.g. <cite>_sq</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of strings like <cite>(real_knob, imaginary_knob)</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.get_k_strings">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">get_k_strings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orientation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'both'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#get_k_strings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.get_k_strings" title="Link to this definition"></a></dt>
<dd><p>Return all K-column names for a given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> -- lowest order to include. Default 0.</p></li>
<li><p><strong>stop</strong> -- highest order + 1 to include (same as in <cite>range()</cite>). Default 8.</p></li>
<li><p><strong>orientation</strong> -- ‘S’ for skew, ‘’ for normal, ‘both’ for both</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.get_kqs_for_coupling_correction">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">get_kqs_for_coupling_correction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#get_kqs_for_coupling_correction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.get_kqs_for_coupling_correction" title="Link to this definition"></a></dt>
<dd><p>Returns a list of elements for the respective beam as used for coupling correction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>beam</strong> -- Beam to use</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of KQS-names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.get_lhc_sequence_filename_and_bv">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">get_lhc_sequence_filename_and_bv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'lhc'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#get_lhc_sequence_filename_and_bv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.get_lhc_sequence_filename_and_bv" title="Link to this definition"></a></dt>
<dd><p>Return the default sequence filename, the sequence name and the bv-flag
for the given beam.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam</strong> (<em>int</em>) -- beam to use.</p></li>
<li><p><strong>accel</strong> (<em>str</em>) -- accelerator name (‘lhc’ or ‘hllhc’).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.get_tfs">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">get_tfs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_regex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns_regex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_selected</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_element_numbering</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TfsDataFrame</span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#get_tfs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.get_tfs" title="Link to this definition"></a></dt>
<dd><p>Returns the filtered content of the given <cite>table</cite> as TfsDataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> -- madx table to convert to dataframe</p></li>
<li><p><strong>index</strong> -- indices to be included in dataframe (need ot be present in table)</p></li>
<li><p><strong>columns</strong> -- columns to be included in dataframe (need to be present in table)</p></li>
<li><p><strong>index_regex</strong> -- regex-selection to be applied onto (selected) indices</p></li>
<li><p><strong>columns_regex</strong> -- regex-selection to be applied onto (selected) columns</p></li>
<li><p><strong>only_selected</strong> -- returns only selected rows and columns. Overridden by
either <code class="docutils literal notranslate"><span class="pre">index</span></code> for rows or <code class="docutils literal notranslate"><span class="pre">columns</span></code> for columns
(i.e. the given <code class="docutils literal notranslate"><span class="pre">index</span></code> or <code class="docutils literal notranslate"><span class="pre">columns</span></code> will be
returned). If the selection is empty ALL rows and columns
will be returned, as it can not be decided if the
selection is empty from a <code class="docutils literal notranslate"><span class="pre">clear</span></code>, or from
over-exclusive selection.</p></li>
<li><p><strong>remove_element_numbering</strong> -- Removes the <code class="docutils literal notranslate"><span class="pre">:#</span></code> from the element names
(present in column NAME in twiss/error tables)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>TfsDataFrame with selected indices and columns from table and
summary as header, if available.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.get_tune_and_chroma_knob_values">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">get_tune_and_chroma_knob_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#get_tune_and_chroma_knob_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.get_tune_and_chroma_knob_values" title="Link to this definition"></a></dt>
<dd><p>Saves the current tune and dispersion knob values into list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>accel</strong> -- Accelerator we are using ‘LHC’ or ‘HLLHC’ see
<code class="xref py py-func docutils literal notranslate"><span class="pre">get_tune_and_dispersion_knobs()</span></code></p></li>
<li><p><strong>beam</strong> -- beam we are using</p></li>
<li><p><strong>suffix</strong> (<em>str</em>) -- suffix to add to the knobs, e.g. <cite>_sq</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict of qx, qy, dqx and dqy knob values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.get_tune_and_chroma_knobs">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">get_tune_and_chroma_knobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#get_tune_and_chroma_knobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.get_tune_and_chroma_knobs" title="Link to this definition"></a></dt>
<dd><p>Get names of knobs to change tune and chromaticity as tuple of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>accel</strong> -- Accelerator either ‘LHC’ (dQ[xy], dQp[xy] knobs) or
‘HLLHC’ (kqt[fd], ks[fd] knobs)</p></li>
<li><p><strong>beam</strong> -- Beam to use, for the knob names</p></li>
<li><p><strong>suffix</strong> (<em>str</em>) -- suffix to add to the knobs, e.g. <cite>_sq</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of strings like <cite>(qx, qy, dqx, dqy)</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.lhc_arc_names">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">lhc_arc_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#lhc_arc_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.lhc_arc_names" title="Link to this definition"></a></dt>
<dd><p>Names of all arcs for given beam.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.lhc_arcs">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">lhc_arcs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#lhc_arcs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.lhc_arcs" title="Link to this definition"></a></dt>
<dd><p>Strings of all LHC arcs.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.match_tune">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">match_tune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dqx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dqy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-21</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knobs_suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#match_tune"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.match_tune" title="Link to this definition"></a></dt>
<dd><p>Simple tune (and chromaticity) matching.
If both are given it matches first tune and dispersion independently and then together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>accel</strong> -- Accelerator we are using ‘LHC’ or ‘HLLHC’</p></li>
<li><p><strong>sequence</strong> -- Sequence to use</p></li>
<li><p><strong>qx</strong> -- tune to match in x</p></li>
<li><p><strong>qy</strong> -- tune to match in y</p></li>
<li><p><strong>dqx</strong> -- chromaticity to match in x</p></li>
<li><p><strong>dqy</strong> -- chromaticity to match in y</p></li>
<li><p><strong>step</strong> -- step size to vary knob</p></li>
<li><p><strong>tolerance</strong> -- tolerance for successfull matching</p></li>
<li><p><strong>calls</strong> -- number of varying calls</p></li>
<li><p><strong>knobs_suffix</strong> -- suffix to use with the knobs, e.g.`_sq`</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.power_landau_octupoles">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">power_landau_octupoles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mo_current</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defective_arc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#power_landau_octupoles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.power_landau_octupoles" title="Link to this definition"></a></dt>
<dd><p>Power the landau octupoles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>mo_current</strong> -- MO powering in ampere</p></li>
<li><p><strong>beam</strong> -- beam to use</p></li>
<li><p><strong>defective_arc</strong> -- If true the KOD in Arc 56 are powered for less Imax</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.rdts_ptc">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">rdts_ptc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TfsDataFrame</span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#rdts_ptc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.rdts_ptc" title="Link to this definition"></a></dt>
<dd><p>Calculate the RDTs via PTC_TWISS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>order</strong> -- Maximum order of the RDTs. Default <cite>4</cite></p></li>
<li><p><strong>file</strong> -- Path to rdt output file. Default <cite>None</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>TfsDataframe with results</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.sixtrack_output">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">sixtrack_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#sixtrack_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.sixtrack_output" title="Link to this definition"></a></dt>
<dd><p>Prepare output for sixtrack run.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.switch_magnetic_errors">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">switch_magnetic_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#switch_magnetic_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.switch_magnetic_errors" title="Link to this definition"></a></dt>
<dd><p>Which magnetic field orders to apply.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>madx</strong> -- Madx instance</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>default</strong> -- sets global default to this (default of default is <cite>False</cite>).</p></li>
<li><p><strong>AB#</strong> -- sets the default for all of that order.</p></li>
<li><p><strong>B#</strong> (<em>A# or</em>) -- sets the default for systematic and random of this id.</p></li>
<li><p><strong>etc.</strong> (<em>A#s</em><em>, </em><em>B#r</em>) -- sets the specific value.</p></li>
</ul>
</dd>
</dl>
<p>with # in [1, 15], where 1 == dipolar field.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.general.temp_disable_errors">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.general.</span></span><span class="sig-name descname"><span class="pre">temp_disable_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/general.html#temp_disable_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.general.temp_disable_errors" title="Link to this definition"></a></dt>
<dd><p>Disable all global variable args and restore their value afterwards.</p>
</dd></dl>

<section id="input-output-tools">
<span id="module-cpymad_lhc.io"></span><h2>Input/Output Tools<a class="headerlink" href="#input-output-tools" title="Link to this heading"></a></h2>
<p>Tools to enable easy input and output operations with cpymad.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="cpymad_lhc.io.PathContainer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cpymad_lhc.io.</span></span><span class="sig-name descname"><span class="pre">PathContainer</span></span><a class="reference internal" href="../_modules/cpymad_lhc/io.html#PathContainer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.io.PathContainer" title="Link to this definition"></a></dt>
<dd><p>Class for easy access to stored paths and conversion to strings.</p>
</dd></dl>

<section id="corrector-limits">
<span id="module-cpymad_lhc.corrector_limits"></span><h2>Corrector Limits<a class="headerlink" href="#corrector-limits" title="Link to this heading"></a></h2>
<p>Checks whether the assigned strengths do not exceed a given maxima.
If it does exceed it, depending on <cite>limit_to_max</cite> either an error is thrown
or the strength is redefined to the maximum (while its sign is retained).
All values are energy independent.</p>
<p>The python script was adapted from
errors/corr_limit.madx or errors/corr_value_limit.madx (depending on HL-LHC version)</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.corrector_limits.check_corrector_limits">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.corrector_limits.</span></span><span class="sig-name descname"><span class="pre">check_corrector_limits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_to_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/corrector_limits.html#check_corrector_limits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.corrector_limits.check_corrector_limits" title="Link to this definition"></a></dt>
<dd><p>Wrapper to run the limit checks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<em>Madx</em>) -- MAD-X instance</p></li>
<li><p><strong>accel</strong> (<em>str</em>) -- Accelerator to check.</p></li>
<li><p><strong>beam</strong> (<em>int</em>) -- Beam to check</p></li>
<li><p><strong>limit_to_max</strong> (<em>bool</em>) -- If <code class="docutils literal notranslate"><span class="pre">True</span></code> set the value to the max if above limit.
If <code class="docutils literal notranslate"><span class="pre">False</span></code> will raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> after finding
too high values. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="coupling-correction">
<span id="module-cpymad_lhc.coupling_correction"></span><h2>Coupling Correction<a class="headerlink" href="#coupling-correction" title="Link to this heading"></a></h2>
<p>Creates a coupling knob from current optics.
Perform coupling correction.
The functionality is based on the FineTuneCoupling scripts.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.coupling_correction.correct_coupling">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.coupling_correction.</span></span><span class="sig-name descname"><span class="pre">correct_coupling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knobs_suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/coupling_correction.html#correct_coupling"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.coupling_correction.correct_coupling" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Wrapper for coupling correction to use the default knob-names if not</dt><dd><p>otherwise given.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>accel</strong> -- Accelerator we are using ‘LHC’ or ‘HLLHC’</p></li>
<li><p><strong>sequence</strong> -- Sequence to use</p></li>
<li><p><strong>knobs_suffix</strong> -- Use suffix with knobs ( e.g. <cite>_sq</cite>)</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>correct_coupling_with_knobs</strong> (<em>Other arguments of</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.coupling_correction.correct_coupling_with_knobs">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.coupling_correction.</span></span><span class="sig-name descname"><span class="pre">correct_coupling_with_knobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tune_knobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chroma_knobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coupling_knobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dqx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dqy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simplex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre_estimation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_tunes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/coupling_correction.html#correct_coupling_with_knobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.coupling_correction.correct_coupling_with_knobs" title="Link to this definition"></a></dt>
<dd><p>Corrects coupling via the given knobs.</p>
<p>If there is no coupling, the tunes should be able to be matched
to the same factional tunes (mid-tunes). If there is a remaining tune split,
this is the closest tune approach (cta) and indicates the presence of
coupling.</p>
<p>The algorithm is as follows:
First the coupling knob settings are estimated by a one-step newton
optimization (if <cite>pre_estimate</cite> is set).
Then the tune-knobs and the coupling knobs are used
alternatingly to match the tunes together. This is iterated according to the
desired <cite>iteration</cite> parameter.
Before and after this correction the cta is checked.</p>
<p>Remark: The first <cite>twiss</cite> call in the first <cite>_analytical_minimization</cite> call
is unneccessary as the nothing has changed between this one and the one in
<cite>_cta_check</cite>. Could be somehow checked for speed optimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>tune_knobs</strong> -- names of elements/knobs to vary for tune matching</p></li>
<li><p><strong>chroma_knobs</strong> -- names of elements/knobs to vary for chroma matching:</p></li>
<li><p><strong>coupling_knobs</strong> -- names of elements/knobs to vary for coupling matching:</p></li>
<li><p><strong>sequence</strong> -- Sequence to use</p></li>
<li><p><strong>qx</strong> -- tune to match in x</p></li>
<li><p><strong>qy</strong> -- tune to match in y</p></li>
<li><p><strong>dqx</strong> -- chromaticity to match in x</p></li>
<li><p><strong>dqy</strong> -- chromaticity to match in y</p></li>
<li><p><strong>tolerance</strong> -- (final) tolerance for successfull matching</p></li>
<li><p><strong>iterations</strong> -- number of iterations in empirical matching</p></li>
<li><p><strong>simplex</strong> -- use simplex method in empirical matching</p></li>
<li><p><strong>pre_estimation</strong> -- use analytical method to estimate coupling-knob settings.
This will only work if the given coupling knobs correspond
to the imaginary and real part of F1001.</p></li>
<li><p><strong>match_tunes</strong> -- If true, also performs a tune and chroma match at the end,
otherwise, the original tune-knob values are recovered.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.coupling_correction.match">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.coupling_correction.</span></span><span class="sig-name descname"><span class="pre">match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-21</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chrom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simplex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/coupling_correction.html#match"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.coupling_correction.match" title="Link to this definition"></a></dt>
<dd><p>Match the <cite>knobs</cite> to the settings in <cite>kwargs</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>sequence</strong> -- Sequence to use</p></li>
<li><p><strong>knobs</strong> -- Sequence of variables to match</p></li>
<li><p><strong>chrom</strong> -- use the <cite>chrom</cite> flag in match</p></li>
<li><p><strong>step</strong> -- step size to vary knob</p></li>
<li><p><strong>calls</strong> -- number of varying calls</p></li>
<li><p><strong>tolerance</strong> -- (final) tolerance for successfull matching</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>at</strong><strong>,</strong> (<em>Arguments for the MAD-X global command to be matched</em>)</p></li>
<li><p><strong>etc.</strong> (<em>e.g. q1=</em><em>, </em><em>dqy=</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="coupling-knob">
<span id="module-cpymad_lhc.coupling_knob"></span><h2>Coupling Knob<a class="headerlink" href="#coupling-knob" title="Link to this heading"></a></h2>
<p>Creates a coupling knob from current optics.
Not implemented yet. TODO!</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.coupling_knob.calculate_coupling_coefficients_per_sector">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.coupling_knob.</span></span><span class="sig-name descname"><span class="pre">calculate_coupling_coefficients_per_sector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deactivate_sectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">('12',</span> <span class="pre">'45',</span> <span class="pre">'56',</span> <span class="pre">'81')</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TfsDataFrame</span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/coupling_knob.html#calculate_coupling_coefficients_per_sector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.coupling_knob.calculate_coupling_coefficients_per_sector" title="Link to this definition"></a></dt>
<dd><p>Calculate the coupling knob coefficients as in corr_MB_ats_v4.
This is basically Eq. (59) in <a class="reference external" href="https://cds.cern.ch/record/522049/files/lhc-project-report-501.pdf">https://cds.cern.ch/record/522049/files/lhc-project-report-501.pdf</a> ,
with cosine for the real part and sine for the imaginary part.
What is happening here is, that we are building a matrix for the equation-system
M * [MQS12,…, MQS81] = -[RE, IM]
where RE and IM are the real and imaginary parts of the coupling coefficients,
and therefore the knobs we want to create.
MQS12 - MQS81 is the total powering of the MQS per arc, which we steer with
the knob. All MQS in a single arc are assumed to be powered equally.
After building the matrix, we “solve” the equation system via pseudo-inverese M+
and get therefore the definition of the coupling knob.
[MQS12,…, MQS81] = - M+ * [RE, IM]
HINT: The MINN function in corr_MB_ats_v4 is simply the calculation the pseudo-inverse:
M+  = M’ (M * M’)^-1  (’ = transpose, ^-1 = inverse)
including the minus on the rhs of the equation.
.. todo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- Get beta and phases from the beamline directly (instead of the TFS dataframe)
- Make the number of MQS more flexible, could maybe be parsed from the beamline
- Why is there an absolute value in Eq. (59) but not in the code? (see also https://cds.cern.ch/record/2778887/files/CERN-ACC-NOTE-2021-0022.pdf)
- Add a2 correction to the KQS definition (as in corr_MB_ats_v4)
- Include the actual fractional tune split of the current machine (see also https://cds.cern.ch/record/2778887/files/CERN-ACC-NOTE-2021-0022.pdf)
- Calculate also the contribution to f_1010 and try to set to zero
- Does this still work when slicing the MQS?
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>tfs.TfsDataFrame</em>) -- Dataframe containing the optics of the machine.</p></li>
<li><p><strong>deactivate_sectors</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) -- Deactivate these sectors, i.e. don’t use their MQS.
Defaults to (‘12’, ‘45’, ‘56’, ‘81’), the ATS sectors.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.coupling_knob.create_coupling_knobs">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.coupling_knob.</span></span><span class="sig-name descname"><span class="pre">create_coupling_knobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/coupling_knob.html#create_coupling_knobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.coupling_knob.create_coupling_knobs" title="Link to this definition"></a></dt>
<dd><p>Create coupling knobs in the beam-line.
WARNING: This function will not take a2 errors into account!
Normally, the a2 errors are also corrected with the MQS, but in this function
the MQS powering is fully controlled by the coupling knobs.
See also the todo’s in <code class="xref py py-func docutils literal notranslate"><span class="pre">xmask.lhc.knob_manipulations.calculate_coupling_coefficients_per_sector()</span></code>
:param madx: Madx instance to incorporate the knobs in
:type madx: Madx
:param beam: Beam number.
:type beam: int
:param optics: Path or TfsDataFrame of the twiss containing the optics to be used.</p>
<blockquote>
<div><p>If not given, a twiss will be computed. Defaults to None.</p>
</div></blockquote>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.coupling_knob.get_attribute_response">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.coupling_knob.</span></span><span class="sig-name descname"><span class="pre">get_attribute_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../_modules/cpymad_lhc/coupling_knob.html#get_attribute_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.coupling_knob.get_attribute_response" title="Link to this definition"></a></dt>
<dd><p>Creates the linear response matrix of the given <cite>variables</cite> for the desired <cite>attributed</cite>.</p>
</dd></dl>

<section id="ir-orbit">
<span id="module-cpymad_lhc.ir_orbit"></span><h2>IR Orbit<a class="headerlink" href="#ir-orbit" title="Link to this heading"></a></h2>
<p>Functions to setup and check the orbit in the IRs.</p>
<p>The values in the <cite>on_</cite> knobs (see <cite>CROSSING_SCHEMES</cite> and <cite>get_orbit_variables()</cite>)
refer to the settings in mm and urad in Beam 1 (i.e. not only the Beam 1
reference frame but Beam 1 itself). Beam 2 or Beam 4 are then configured
accordingly. To check the twiss if everything is set correctly, the following
symmetry/sign relations should hold true:</p>
<p>Beam 1 and Beam 2 share coordinate system.
Crossing angles - opposite sign
Crossing offsets (same plane) - same sign
Separation - opposite sign</p>
<p>Beam 1 and Beam 4 have x-axis inverted.
Y Crossing Angles - same sign
Y Crossing offsets - same sign (i.e. same side)
X Separation - same sign (i.e. opposite sides)</p>
<p>X Crossing Angles - opposite sign
X Crossing offsets - opposite sign (i.e. same sides)
Y Separation - opposite sign (i.e. opposite sides)</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.ir_orbit.check_crabbing">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.ir_orbit.</span></span><span class="sig-name descname"><span class="pre">check_crabbing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_set</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/ir_orbit.html#check_crabbing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.ir_orbit.check_crabbing" title="Link to this definition"></a></dt>
<dd><p>Check that the crabbing is not larger than the crossing angle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>auto_set</strong> -- instead of throwing an error, set the crabbing to the xing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.ir_orbit.get_current_orbit_scheme">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.ir_orbit.</span></span><span class="sig-name descname"><span class="pre">get_current_orbit_scheme</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2018</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/ir_orbit.html#get_current_orbit_scheme"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.ir_orbit.get_current_orbit_scheme" title="Link to this definition"></a></dt>
<dd><p>Get the current values for the orbit variales.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>accel</strong> (<em>str</em>) -- ‘lhc’ or ‘hllhc’</p></li>
<li><p><strong>year</strong> (<em>int</em>) -- year of the models/optics (for ‘lhc’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary of all orbit variables and their value/definition.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.ir_orbit.get_orbit_variables">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.ir_orbit.</span></span><span class="sig-name descname"><span class="pre">get_orbit_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2018</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/ir_orbit.html#get_orbit_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.ir_orbit.get_orbit_variables" title="Link to this definition"></a></dt>
<dd><p>Get the variable names used for orbit setup.
:param accel: ‘lhc’ or ‘hllhc’
:type accel: str
:param year: year of the models/optics (for ‘lhc’)
:type year: int</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>list of all orbit variables, apart form those in 1</dt><dd><dl class="simple">
<dt>1: dictionary of additional variables, that in the</dt><dd><p>default configurations have the same value as another variable</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple of 0</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.ir_orbit.log_orbit">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.ir_orbit.</span></span><span class="sig-name descname"><span class="pre">log_orbit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2018</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">twiss</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/ir_orbit.html#log_orbit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.ir_orbit.log_orbit" title="Link to this definition"></a></dt>
<dd><p>Get the orbit from madx-instance and twiss-dataframe and
log the configuration per IP.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.ir_orbit.log_orbit_from_madx">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.ir_orbit.</span></span><span class="sig-name descname"><span class="pre">log_orbit_from_madx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2018</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/ir_orbit.html#log_orbit_from_madx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.ir_orbit.log_orbit_from_madx" title="Link to this definition"></a></dt>
<dd><p>Log current orbit scheme sorted by IP.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.ir_orbit.log_orbit_from_twiss">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.ir_orbit.</span></span><span class="sig-name descname"><span class="pre">log_orbit_from_twiss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">twiss</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/ir_orbit.html#log_orbit_from_twiss"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.ir_orbit.log_orbit_from_twiss" title="Link to this definition"></a></dt>
<dd><p>Log orbit from twiss-dataframe.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.ir_orbit.orbit_setup">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.ir_orbit.</span></span><span class="sig-name descname"><span class="pre">orbit_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Madx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2018</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/ir_orbit.html#orbit_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.ir_orbit.orbit_setup" title="Link to this definition"></a></dt>
<dd><p>Automated orbit setup for some default schemes.
Please check if these are still valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> -- Madx instance</p></li>
<li><p><strong>accel</strong> (<em>str</em>) -- ‘lhc’ or ‘hllhc’</p></li>
<li><p><strong>year</strong> (<em>int</em>) -- year of the models/optics (for ‘lhc’)</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>scheme</strong> -- default orbit scheme to apply.
Choices: ‘flat’, ‘inj’, ‘top’, None
Default: ‘flat’ (all values 0)</p></li>
<li><p><strong>other</strong> -- All standard crossing scheme variables. Values given here override
the values in the scheme, which in turn override the ones already set.
If the value of a variable is <cite>None</cite>, the variable is not used
(i.e. the value in the <cite>madx.globals</cite> is kept).</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary with current settings of the scheme.</p>
</dd>
</dl>
</dd></dl>

<section id="logging">
<span id="module-cpymad_lhc.logging"></span><h2>Logging<a class="headerlink" href="#logging" title="Link to this heading"></a></h2>
<p>Logging tools with cpymad perks.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="cpymad_lhc.logging.MaxFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cpymad_lhc.logging.</span></span><span class="sig-name descname"><span class="pre">MaxFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/logging.html#MaxFilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.logging.MaxFilter" title="Link to this definition"></a></dt>
<dd><p>To get messages only up to a certain level</p>
<dl class="py method">
<dt class="sig sig-object py" id="cpymad_lhc.logging.MaxFilter.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/logging.html#MaxFilter.filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.logging.MaxFilter.filter" title="Link to this definition"></a></dt>
<dd><p>Determine if the specified record is to be logged.</p>
<p>Returns True if the record should be logged, or False otherwise.
If deemed appropriate, the record may be modified in-place.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cpymad_lhc.logging.StreamToLogger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cpymad_lhc.logging.</span></span><span class="sig-name descname"><span class="pre">StreamToLogger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/logging.html#StreamToLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.logging.StreamToLogger" title="Link to this definition"></a></dt>
<dd><p>File-like stream object that redirects writes to a logger instance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cpymad_lhc.logging.cpymad_logging_setup">
<span class="sig-prename descclassname"><span class="pre">cpymad_lhc.logging.</span></span><span class="sig-name descname"><span class="pre">cpymad_logging_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command_log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">PosixPath('madx_commands.log')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">PosixPath('full_output.log')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_handlers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cpymad_lhc/logging.html#cpymad_logging_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cpymad_lhc.logging.cpymad_logging_setup" title="Link to this definition"></a></dt>
<dd><p>Create all necessary logging.
Adds stream handlers to root logger including cpymad loggers for output and commands.
Takes also care of file handlers if specified.</p>
<dl class="simple">
<dt>Args</dt><dd><p>output_log: Path to write madx-output to (None to deactivate)
command_log: Path to write madx-commands to (None to deactivate)
full_log: Path to write full logging output to (None to deactivate)
colors: Bool whether ascii-colors should be used
level: Minimum stdout logging level. Madx commands and output are always logged
clear_loggers: Clears all handlers of the loggers first.</p>
</dd>
<dt>Returns</dt><dd><p>dict with StreamToLoggers ‘stdout’ and ‘command_log’.
Can be used as <cite>Madx(**cpymad_logging_setup())</cite></p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to the documentation of cpymad LHC!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>